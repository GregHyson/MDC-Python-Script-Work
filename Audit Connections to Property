# PART 1

import arcpy

# Use the Make Feature Layer tool to make the Input Feature Layer
arcpy.env.workspace = 'G:\ArcGIS\Desktop103\Packages\Administrative.lyr'
arcpy.MakeFeatureLayer_management('Locality', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\temp_layer',"[LOCALITY] = 'Blenheim'")
arcpy.SaveToLayerFile_management('S:\Ghy\Development\Temp_Script_Data_Saving_Location\temp_layer', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\Blenheim Locality.lyr')

# PART 2

import arcpy

# TO BE GONE THROUGH WITH GRANT CROSWELL CONCERNIG SAVING AND RELOADING THE LAYER FIELS APPROPRIATELY

# Use the Select Layer by Location tool to select property polygons wihtin the Blenheim Locality
arcpy.MakeFeatureLayer_management('G:\ArcGIS\Desktop103\Packages\Property.lyr', 'property_lyr')
arcpy.SelectLayerByLocation_management('property_lyr', 'within', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\Blenheim Locality.lyr')
# Save the selected features as a layer file to be used at a later time
arcpy.SaveToLayerFile_management('property_lyr', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\Properties in Blenheim')

# Repeat this process but for the Blenheim locality Service Line Pipes instead
#arcpy.MakeFeatureLayer_management('S:\Ghy\Development\Layer Files\Water Service Line Pipe.lyr', 'water_service_lines', "LOCALITY = 'Blenheim'")
#arcpy.SelectLayerByLocation_management('water_service_lines', 'within', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\Blenheim Locality.lyr')
#arcpy.SaveToLayerFile_management('water_service_lines', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\WSL Blenheim')

#arcpy.MakeFeatureLayer_management('S:\Ghy\Development\Layer Files\Stormwater Service Line Pipe.lyr', 'stormwater_service_lines', "LOCALITY = 'Blenheim'")
#arcpy.SelectLayerByLocation_management('stormwater_service_lines', 'within', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\Blenheim Locality.lyr')
#arcpy.SaveToLayerFile_management('stormwater_service_lines', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\SWSL Blenheim')

#arcpy.MakeFeatureLayer_management('S:\Ghy\Development\Layer Files\Wastewater Service Line Pipe.lyr', 'wastewater_service_lines', "LOCALITY = 'Blenheim'")
#arcpy.SelectLayerByLocation_management('wastewater_service_lines', 'within', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\Blenheim Locality.lyr')
#arcpy.SaveToLayerFile_management('wastewater_service_lines', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\WWSL Blenheim')

# PART 3

import arcpy
arcpy.MakeFeatureLayer_management('S:\Ghy\Development\Layer Files\Water Service Line Pipe.lyr', 'input_layer') 
arcpy.MakeFeatureLayer_management('S:\Ghy\Development\Temp_Script_Data_Saving_Location\Properties in Blenheim.lyr','selecting_layer')

rows = arcpy.SearchCursor('selecting_layer')
for row in rows:
    arcpy.management.SelectLayerByLocation('input_layer', 'intersect', 'selecting_layer', "", "REMOVE_FROM_SELECTION")
    
arcpy.SaveToLayerFile_management('selecting_layer', 'S:\Ghy\Development\Temp_Script_Data_Saving_Location\Not connected properties in Blenheim')    
        

